# Предложение по реструктуризации Network Bot

## 1. Проблема
Текущий список команд (>20) слишком велик и сложен для восприятия. Функционал разбросан по разным командам, что усложняет навигацию.

## 2. Предлагаемое решение: Иерархическое меню
Вместо списка команд переходим к интуитивному интерфейсу на кнопках (Inline Buttons). Команда `/start` открывает "Главный пульт".

### 2.1 Новая структура Главного Меню

**Главное меню**
├── 👤 **Мой профиль**
│   ├── 👀 Просмотр визитки
│   ├── ✏️ Редактировать данные
│   └── 🔗 Поделиться профилем
│
├── 📂 **Мои материалы**
│   ├── 🚀 Питчи
│   ├── 📄 Ванпейджеры
│   └── � Приветствия
│
├── 🤝 **Нетворкинг**
│   ├── 📋 Список контактов
│   ├── 🔍 Поиск по имени/компании (Semantic Search)
│   ├── 🔢 Найти по ID
│   ├── ✨ Синергии (Matches)
│   └── ⏰ Напоминания
│   
│   **Внутри карточки контакта:**
│   ├── 👁 Просмотр полной информации
│   ├── ✏️ Редактировать
│   ├── 🌍 OSINT / Обогащение данных
│   ├── 📤 Экспорт (Notion / Sheets)
│   └── 🗑 Удалить контакт
│
├── 🛠 **Инструменты**
│   ├── 📥 Импорт контактов 
│   │   ├── 📎 Разовый (LinkedIn CSV / Manual CSV)
│   │   └── � Автоматический (раз в час из Notion/Sheets)*
│   ├── 📤 Экспорт всех контактов (CSV / Notion / Sheets)
│   └── 🔄 Синхронизация (ручная)
│
└── ⚙️ **Настройки**
    ├── 🔑 API Ключи (Интеграции)
    ├── 🧠 Настройка AI Промптов
    ├── 📊 Статистика использования
    └── 🎭 Режим (Обычный / Мероприятие)

_*Автоматический импорт активируется автоматически при установке credentials для Notion или Google Sheets_

### 2.2 Оптимизация списка команд
Оставляем в быстром меню Telegram только самое важное:

- `/start` - 🏠 Главное меню
- `/card` - 📇 Моя визитка (быстрый доступ)
- `/search` - 🔍 Найти контакт
- `/profile` - 👤 Профиль
- `/materials` - 📂 Мои материалы (быстрый доступ)

### 2.3 Техническая реализация

#### Этап 1: Создание единого меню
1. **Создать `menu_handlers.py`**:
   - Главное меню с иерархической навигацией
   - Механизм "Назад" для всех подменю
   - Контекст состояния (откуда пришел пользователь)

2. **Обновить карточки контактов** (`common.py`):
   - Добавить кнопки: Редактировать, OSINT, Экспорт, Удалить
   - Интегрировать с существующей логикой из `get_contact_keyboard()`

3. **Создать `contact_detail_handlers.py`**:
   - Просмотр детальной информации
   - Редактирование полей контакта
   - Удаление контакта (с подтверждением)
   - Поиск по ID

#### Этап 2: Автоматический импорт
4. **Расширить `scheduler.py`**:
   - Добавить задачу автоимпорта (1 раз в час)
   - Проверять наличие credentials (Notion/Sheets)
   - Синхронизация изменений

#### Этап 3: Интеграция
5. **Обновить `main.py`**:
   - Сократить список команд до 5 основных
   - Зарегистрировать новые handlers
   - Настроить ConversationHandler для детальных карточек

6. **Адаптировать существующие handlers**:
   - Добавить кнопки "Назад в меню" везде
   - Унифицировать стиль навигации

## 3. Преимущества
- ✅ **Чистота**: Интерфейс не перегружен, всего 5 команд вместо 20+
- ✅ **Интуитивность**: Визуальная иерархия категорий вместо списка команд
- ✅ **Масштабируемость**: Легко добавлять новые функции в соответствующие разделы
- ✅ **Удобство работы с контактами**: Все действия доступны прямо из карточки
- ✅ **Автоматизация**: Регулярный импорт из Notion/Sheets без ручных действий
- ✅ **Доступность OSINT**: Обогащение данных на уровне конкретного контакта
- ✅ **Гибкость поиска**: Как семантический поиск, так и прямой поиск по ID

## 4. Миграционный план
1. Все старые команды останутся доступными для обратной совместимости
2. При использовании старых команд будет появляться подсказка о новом меню
3. Постепенный переход пользователей на новый интерфейс
